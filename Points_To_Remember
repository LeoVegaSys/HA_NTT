Below are a list of points that count as learnings gathered over the idea initiation and testing  stages

- Check if firewall is running
  - systemctl status firewalld
  - Should be inactive
  - Active firewalls do not allow replication users to connect, blocking ports

- Check the SELinux policy on the server using sestatus command
  - If SELinux policy shows Enabled, check the severity of SELinux policy using getenforce command
  - If severity is either Permissive or Disabled, scripts should behave as expected.
  - If severity is Enforcing, look out for issues related to logfile creation, script commands execution and user permissions
  - ** DO THIS ONLY AFTER CONSULTING CLIENT : To set to Permissive SELinux policy, run command setenforce 0

- Confirm if MySQL is running on the expected port, either default port 3306 or any other port. Port 3306 preferred for hassle-free implementation.

- Confirm max_allowed_packet value is same for both master and replica, by running `show variables like 'max_allowed_packet';` on MySQL

- STOP replication slave on MySQL server before stopping/killing mysqld process 
  - Run `stop slave` to stop replication slave on MySQL

- Use mysql command to start/stop MySQL server
  - /usr/local/mysql/bin/mysqladmin shutdown            -- stops server
  - /usr/local/mysql/bin/mysqld_safe &                  -- starts server

- Ensure a file named `.my.cnf` is present in the base folder of root user containing MySQL credentials, to allow scripts to access MySQL without providing credentials
- Contents of .my.cnf
    [client] 
    user=<mysql-user> 
    password=<mysql-user-password> 
    host=localhost 
- Provide 600 permissions to .my.cnf for security purposes 

- On secondary server, check stat_kill_script.sh file in Scripts folder
  - Verify that correct virtual IP value is provided in script
  - Ensure delay is present between restarting simplus stats script AND spStatscommand.txt file rename command 
  - This is so the simplus process is provided sufficient delay to initialize

- Turning SUPER_READ_ONLY flag ON on mysql, turns READ_ONLY ON by default. Command : mysql> SET GLOBAL super_read_only = ON;
  - However, turning SUPER_READ_ONLY flag OFF DOES not turn READ_ONLY OFF.
    - Use commands:
      - mysql> SET GLOBAL super_read_only = OFF;
      - mysql> SET GLOBAL read_only = OFF;

- To stop replication slave from starting by default on starting / restarting MySQL process, 
  - add skip-slave-start=1 under [mysqld] in my.cnf
  - DO remember to start replication server using command `start slave` in MySQL

- While starting the High Availability system,
  - First setup the DB replication process, with initial MASTER SLAVE replication setup, followed by MASTER MASTER REPLICATION setup
  - After this, set up Keepalived, with health check scripts first and then notify scripts.
  - To initiate HA setup, start keepalived process on MASTER host, followed by BACKUP host/s
  - To stop HA setup, stop keepalived process on BACKUP host/s, followed lastly by MASTER host

- To comment/uncomment crontab separately, use the toggle_cron.sh script present in /etc/keepalived
  - Usage to comment cron jobs : sh toggle_cron.sh comment 
          to uncomment cron jobs : sh toggle_cron.sh uncomment 

- To send test mail feature, there are 2 alternatives:
  - use the send_ha_mail.py script in /etc/keepalived folder, to send generic mail
    - The script expects mail subject (required), body (required) and importance (optional)
    - Usage : python send_ha_mail.py --subject "<SUBJECT>" --body "<BODY>" --important
  - use the send_notify_mail.sh script in /etc/keepalived, to send state change mail
    - The script expects 4 arguments, primary among which is the 3rd (server state [MASTER/BACKUP/FAULT]). Others are not being considered as of now.
    - Usage to send state change to MASTER mail : sh send_notify_mail.sh X Y MASTER Z

- Check the local .ini config file present in /etc/keepalived folder
  - Verify no spaces are present before or after "=" for all key-value pairs
    - Note : Python scripts can handle spaces , but not .sh script files
  - Verify all the paramaters set in .ini file are correct for the given server.
  - Also verify that the correct .ini file has been source'd in all the scripts
    - Run `grep .ini *` in /etc/keepalived, to get list of occurences of config file in scripts in the folder



GOOD-TO-KNOW:

- To run commands on MASTER, that should not be written to binlog, and hence not replicated on slave, use SET SQL_LOG_BIN=0
  - This informs server not to write the following commands after this in binlog
  - Remember to run SET SQL_LOG_BIN=1, to reactivate writing to binlog

- Keep an eye out on the size of relay logs on SLAVE, when replication has failed. SLAVE's IO thread keeps reading the MASTER binlogs till the latest update.